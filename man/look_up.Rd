% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/look_up.R
\name{look_up}
\alias{look_up}
\title{Look up geological intervals and assign geological stages}
\usage{
look_up(
  occdf,
  int_key = palaeoverse::interval_key,
  assign_with_GTS = "GTS2020",
  early_interval = "early_interval",
  late_interval = "late_interval",
  print_assigned = FALSE
)
}
\arguments{
\item{occdf}{\code{dataframe}. A dataframe of the fossil occurrences you
wish to bin, with columns specifying the earliest and the latest possible
interval associated with each occurrence.}

\item{int_key}{\code{dataframe}. A dataframe linking interval names to
international, geological stage names from the ICS, or other, user-defined
intervals.
This dataframe should contain the following named columns containing
\code{character} values: \cr
\itemize{
\item \code{interval_name} contains the names to be matched from \code{occdf} \cr
\item \code{early_stage} contains the names of the earliest or only stages
corresponding to the intervals, and, optionally \cr
\item \code{late_stage} contains the latest stage corresponding to the
intervals. \cr
}
Optionally, named columns provide maximal and minimal ages for the
intervals. \cr
\itemize{
\item \code{max_ma}
\item \code{min_ma}
}}

\item{assign_with_GTS}{\code{character} or \code{FALSE}. Allows intervals to
be searched in the \code{GTS2020} (default) or the \code{GTS2012} table. Set to
\code{FALSE} to disable.}

\item{early_interval}{\code{character}. Name of the column in \code{occdf} that
contains the earliest interval from which the occurrences are from. Defaults
to \code{early_interval}.}

\item{late_interval}{\code{character}. Name of the column in \code{occdf} that
contains the latest interval from which the occurrences are from. Defaults
to \code{late_interval}.}

\item{print_assigned}{\code{logical}. Should the assigned interval names be
printed? Defaults to \code{FALSE}.}
}
\value{
A \code{dataframe} of the original input \code{data} with the following
appended columns is returned: \code{early_stage} and \code{late_stage}, corresponding
to the earliest and latest international geological stage which
could be assigned to the occurrence based on the given interval names.
\code{interval_max_ma} and \code{interval_min_ma} return maximal and minimal interval ages
if provided in the interval key, or if they can be fetched from GTS2012 or GTS2020.
A column \code{interval_mid_ma} is appended to provide the midpoint
age of the interval.
}
\description{
A function to assign fossil occurrences to \href{https://stratigraphy.org/ICSchart/ChronostratChart2022-02.pdf}{international geological stages} from the
International Commision on Stratigraphy (ICS)
or user-defined intervals based on interval names.
}
\details{
Instead of  geological stages, the user can supply any names in the
\code{early_stage} and \code{late_stage} column of \code{int_key}.
\code{assign_with_GTS} should then be set to \code{FALSE}.

An exemplary \code{int_key} has been included within this package
(\code{\link{interval_key}}). This key works well for assigning
geological stages to many of the intervals from the
\href{https://paleobiodb.org}{Paleobiology Database}
and the \href{https://www.paleo-reefs.pal.uni-erlangen.de/}{Paleoreefs Database}.
Palaeoverse can provide no guaranty that all of
the stage assignments with the exemplary key are accurate.
The table corresponding to this key can be loaded with
\code{palaeoverse::interval_key}.
}
\section{Developer(s)}{

Kilian Eichenseer & William Gearty
}

\section{Reviewer(s)}{

Lewis A. Jones
}

\examples{
# Grab internal tetrapod data
occdf <- tetrapods
# assign stages using the exemplary interval_key
occdf <- look_up(occdf)

## Use own key to assign intervals
# create example data
occdf <- data.frame(
           stage = c("any Permian", "first Permian stage",
                     "any Permian", "Roadian"))
# create example key
interval_key <- data.frame(
                  interval_name = c("any Permian", "first Permian stage"),
                  early_stage = c("Asselian", "Asselian"),
                  late_stage = c("Changhsingian", "Asselian"))
# assign stages using the custom interval_key, use "GTS2012":
occdf <- look_up(occdf, int_key = interval_key, assign_with_GTS = "GTS2012",
early_interval = "stage", late_interval = "stage",
print_assigned = TRUE)
}
