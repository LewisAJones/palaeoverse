% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/look_up.R
\name{look_up}
\alias{look_up}
\title{Look up geological intervals and assign ICS ages and stages}
\usage{
look_up(
  occdf,
  int_key = palaeoverse::interval_key,
  assign_with_GTS = "GTS2020",
  early_interval = NULL,
  late_interval = NULL,
  print_assigned = FALSE
)
}
\arguments{
\item{occdf}{\code{dataframe}. A dataframe of the fossil occurrences you
wish to bin. The following named columns need to be contained:
\code{early_interval} and, optionally, \code{late_interval}. These columns need
to be \code{character} values. If no \code{late_interval} is supplied, only
\code{early_interval} is used, and it is assumed that the occurrences are from
that interval only.}

\item{int_key}{\code{dataframe}. A dataframe linking interval names to
international, geological stage names, or other, user-defined intervals.
This dataframe should contain the following named columns containing
\code{character} values: \cr
\itemize{
\item \code{interval_name} contains the names to be matched from \code{occdf} \cr
\item \code{early_stage} contains the names of the earliest or only stages
corresponding to the intervals, and, optionally \cr
\item \code{late_stage} contains the latest stage corresponding to the
intervals. \cr
}
Optionally, the numeric vectors \cr
\itemize{
\item \code{stage_max_ma} and
\item \code{stage_min_ma} provide maximal and minimal ages for the intervals.
}}

\item{assign_with_GTS}{\code{character} or \code{FALSE}. Allows intervals to
be searched in the \code{GTS2020} (default) or the \code{GTS2012} table. Set to
\code{FALSE} to disable.}

\item{early_interval}{\code{character}. Alternative column name that contains
the earliest or only interval from which the occurrences are from.}

\item{late_interval}{\code{character}. Alternative column name that contains
the latest interval from which the occurrences are from.}

\item{print_assigned}{\code{logical}. Should the assigned interval names be
printed?
Defaults to \code{FALSE}.}
}
\value{
A \code{dataframe} of the original input \code{data} with the following
appended columns is returned: \code{early_stage} and \code{late_stage}, corresponding
to the earliest and latest international geological stage which
could be assigned to the occurrence based on the given interval names.
\code{stage_max_ma} and \code{stage_min_ma} return maximal and minimal ages if provided
in the interval key, or if they can be fetched from GTS2012 or GTS2020.
A column \code{mid_ma} is appended to provide the midpoint
age of the interval.
}
\description{
A function to assign fossil occurrences to international geological stages
or user-defined intervals based on interval names.
}
\details{
Instead of  geological stages, the user can supply any names in the
\code{early_stage} and \code{late_stage} column; \code{assign_with_GTS} should then
be set to \code{FALSE}.

An exemplary \code{int_key} has been included within this package
(\code{\link{interval_key}}). This key works well for assigning
geological stages to many of the intervals from the
\href{https://paleobiodb.org}{Paleobiology Database}
and the \href{https://www.paleo-reefs.pal.uni-erlangen.de/}{Paleoreefs Database}.
Palaeoverse can provide no guaranty that all of
the stage assignments with the exemplary key are accurate.
The table corresponding to this key can be loaded with
\code{palaeoverse::interval_key}.
}
\section{Developer(s)}{

Kilian Eichenseer & William Gearty
}

\section{Reviewer(s)}{

Lewis A. Jones
}

\examples{
\dontrun{
# Grab internal tetrapod data
occdf <- tetrapods
# assign stages using the exemplary interval_key
occdf <- look_up(occdf)

## Use own key to assign intervals
# create example data
occdf <- data.frame(
           stage = c("any Permian", "first Permian stage",
                     "any Permian", "Roadian"))
# create example key
interval_key <- data.frame(
                  interval_name = c("any Permian", "first Permian stage"),
                  early_stage = c("Asselian", "Asselian"),
                  late_stage = c("Changhsingian", "Asselian"))
# assign stages using the custom interval_key, use "GTS2012":
occdf <- look_up(occdf, int_key=interval_key, assign_with_GTS="GTS2012",
early_interval = "stage", print_assigned=TRUE)
}
}
